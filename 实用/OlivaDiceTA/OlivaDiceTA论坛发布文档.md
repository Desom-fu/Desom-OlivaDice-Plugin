# 三角机构模块（Triangle Agency跑团专用插件+人物卡模板）

- **名称**​：三角机构模块
- ​**作者**​：Desom-fu
- ​**版本**​：1.0.1
- ​**兼容版本**​：理论兼容所有版本，但仅在最新版本测试过
- ​**平台**​：理论支持全平台（仅在 QQ 部署测试过）
- ​**操作系统**​：理论支持全系统（仅在 Windows Server 2019 上部署过）
- **前置插件**：OlivaDiceCore
- **三角机构群号**：1056836484

---

## 注意事项

- 建议使用最新构建版`OlivaDiceCore`以获得最佳体验
- 下载地址：https://github.com/OlivOS-Team/OlivaDiceCore/actions
- （记得解压！）
[upl-file uuid=71a33eee-928e-4e55-a52e-ca1118628e4d size=197kB]olivadicecore.zip[/upl-file]

- 建议使用最新构建版`OlivaDiceNativeGUI`以获得最佳体验
- 下载地址：https://github.com/Desom-fu/OlivaDiceNativeGUI/actions
- （记得解压！）
[upl-file uuid=7e860b49-2b94-427f-adc0-576df28df16f size=237kB]olivadicenativegui.zip[/upl-file]

- （可选）建议使用最新构建版`OlivaDiceMaster`以获得最佳体验
- 下载地址：https://github.com/Desom-fu/OlivaDiceMaster/actions
- （记得解压！）
[upl-file uuid=fe737573-ed31-499f-8830-9aeaed227877 size=31kB]olivadicemaster.zip[/upl-file]

- 下载完毕后建议打开`OlivaDice 设置面板`的自定义回复，在回复词中的`配置恢复模块`里面新增一行`OlivaDiceTA`（注意大小写要完全一致!）

---

## 下载

- ###### ​**插件包（记得解压！）** ​:
[upl-file uuid=cb509f51-1473-4611-bcc0-c806292461b3 size=13kB]olivadiceta.zip[/upl-file]

- ###### **三角机构青果专用人物卡模板（解压！）** :
[upl-file uuid=b9009e05-b07c-4f61-8441-02f871edba36 size=828B]ta.zip[/upl-file]

---

## 更新日志

## 2025.9.19 v1.0.1更新：
- 优化自定义回复默认项和显示项

## 2025.9.18 v1.0.0发布：
- 三角机构插件发布
- 支持完整的三角机构检定系统
- 包含燃尽机制和混沌值系统
- 支持现实改写检定和失败追踪
- 自动处理三重升华和三角稳定判定
- 支持表达式系统和技能值替换
- 支持代投功能和权限管理

---

## 核心功能

### 检定系统
- 新增 `.ta <属性/表达式>` 命令，用来进行三角机构技能检定
- 新增 `.tr <属性/表达式>` 命令，用来进行现实改写检定
- 支持多次检定：`.ta3#专注` 进行3次专注检定
- 支持参数修正：
  - `c` 参数：不产生混沌值
  - `f` 参数：不消耗现实改写失败次数（仅.tr）
  - `b数字` 参数：奖励骰子（强制将指定数量的非3改为3）
  - `p数字` 参数：惩罚骰子（强制将指定数量的3改为非3）

### 状态管理
- 新增 `.tcs` 命令，用于管理群组混沌值
  - `.tcs` - 查看当前混沌值
  - `.tcs 数值` - 设置混沌值
  - `.tcs +数值` - 增加混沌值
  - `.tcs -数值` - 减少混沌值
  - 支持表达式：`.tcs 1d6+2`、`.tcs 力量/2`
  
- 新增 `.tfs` 命令，用于管理现实改写失败次数
  - `.tfs` - 查看当前失败次数
  - `.tfs 数值` - 设置失败次数
  - `.tfs +数值` - 增加失败次数
  - `.tfs -数值` - 减少失败次数
  - 支持表达式：`.tfs 1d3`、`.tfs 智力/10`

### 代投功能
- 支持管理员代投：`.ta 属性名 @用户`
- 支持多次代投：`.ta3#专注 @用户`
- 自动识别目标用户的人物卡数据

---

## 游戏机制详解

### 基础检定规则
- **骰子系统**：投掷6D4，统计结果中3的个数
- **成功判定**：
  - 0个3：失败
  - 出现3：成功
  - 3个3：特殊情况（见下文）

### 特殊机制
- **三重升华**：原始骰子就有3个3 → 大成功，不产生混沌值
- **三角稳定**：经过修正后恰好3个3 → 成功，不产生混沌值
- **燃尽效果**：属性值≤0时产生燃尽，将骰子中的3强制改为非3
- **混沌生成**：根据公式 `6 - 最终3的个数 + 燃尽次数 + 惩罚次数` 计算

### 现实改写系统
- **现实改写检定**：使用`.tr`命令进行
- **失败惩罚**：.tr检定失败时增加现实改写失败次数
- **燃尽叠加**：现实改写失败次数会增加.tr检定的燃尽值

---

## 使用示例

```
# 基础检定
.ta 专注          # 使用专注属性进行检定

# 现实改写检定
.tr 共情          # 现实改写检定

# 参数检定
.ta b2专注        # 两个改写次数
.ta p1专注        # 多一次燃尽

# 多次检定
.ta3#专注         # 3次专注检定
.trc2#共情        # 2次现实改写，不产生混沌值

# 代投
.ta 专注 @小明    # 为小明进行专注检定
.ta3#共情 @小明   # 为小明进行3次共情检定

# 状态管理
.tcs              # 查看混沌值
.tcs 10           # 设置混沌值为10
.tcs +1d6         # 增加1d6点混沌值
.tcs -专注        # 减少等于专注属性的混沌值

.tfs              # 查看现实改写失败
.tfs +1           # 增加1次失败
.tfs 10           # 设置失败次数为10
```

---

## 安装指南

1. **下载插件**：下载OlivaDiceTA插件包并解压
2. **安装插件**：将插件文件夹放入OlivOS的plugin目录
3. **配置回复**：在设置面板的自定义回复中添加`OlivaDiceTA`
4. **导入模板**：将ta.json放入人物卡模板目录

---

## 常见问题

**Q: 为什么投出6个3还是成功而不是大成功？**
A: 只有原始骰子就有3个3才是真正的三重升华大成功。通过奖励骰子等方式获得的3个以上3，按普通成功处理。

**Q: 三角稳定是什么？**
A: 当原始骰子不是3个3，但经过各种修正后变成恰好3个3时，触发三角稳定，显示为成功且不产生混沌值。

**Q: 燃尽是如何计算的？**
A: 燃尽值 = 属性燃尽 + 现实改写失败燃尽(.tr时)，其中属性燃尽 = 1。

**Q: 混沌值什么时候增加？**
A: 除了三重升华和三角稳定外，其他情况都会根据公式产生混沌值：6 - 最终3的个数 + 燃尽次数 + 惩罚次数。

---

## 联系与反馈

如有问题或建议，请联系作者：Desom-fu

---

## 使用截图

懒得截图了
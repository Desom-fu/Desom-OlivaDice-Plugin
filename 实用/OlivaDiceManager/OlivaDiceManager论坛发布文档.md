# OlivaDice 群管功能插件

- **名称**：`群管功能插件 (OlivaDiceManager)`
- **作者**：`Desom-fu`
- **版本**：`1.0.0`
- **兼容版本**：`理论兼容所有 3.0 以上的 OlivaDiceCore 版本（在 0.11.67 恶毒的金刚战锤 版本进行测试）`
- **平台**：`仅支持使用 Onebot 协议的 QQ 平台`
- **操作系统**：`理论支持全操作系统（仅在 Windows Server 2019 测试）`
- **前置插件**：`OlivaDiceCore`

---

## 注意事项

- 建议使用最新构建版 `OlivaDiceNativeGUI` 以获得最佳体验
- 下载地址：https://github.com/Desom-fu/OlivaDiceNativeGUI/actions
- （记得解压！）
[upl-file uuid=7e860b49-2b94-427f-adc0-576df28df16f size=237kB]olivadicenativegui.zip[/upl-file]

- 下载完毕后建议打开 `OlivaDice 设置面板` 的自定义回复，在回复词中的 `配置恢复模块` 里面新增一行 `olivadicemanager`（注意大小写要完全一致!）

- ⚠️ **重要提示**：使用本插件需要确保 Bot 拥有相应的群权限（管理员或群主），否则部分功能将无法正常使用！

---

## 下载

- ### 插件包（注意解压！！！）：
[upl-file uuid=待上传 size=待定]OlivaDiceManager.opk[/upl-file]

---

## 更新日志

### 2025.10.21 v1.0.0 发布
- 首版上线
- 实现设置群名片功能
- 实现设置群名功能
- 实现管理员权限管理功能
- 实现群头衔管理功能
- 实现群公告发布功能
- 实现全员禁言功能
- 实现成员禁言/解禁功能
- 实现踢出成员功能
- 实现点赞功能
- 完整的权限验证系统
- 支持自定义回复

---

## 核心功能

### 命令总览

#### 设置命令系列
- `(-/*) .设置 名片 [内容] [@某人/自己]` - 设置群名片（给他人设置需要权限，设置自己不需要）
- `(+/*) .设置 群名 [群名]` - 设置群名称（需要权限）
- `(+/*) .设置 管理员 [添加/移除] [@某人]` - 添加/移除管理员权限（需要权限）
- `(+/*) .设置 头衔 [内容] [@某人/自己]` - 设置群头衔（需要权限）
- `(+/*) .设置 公告 [内容]` - 发布群公告（需要权限）

#### 禁言与管理命令
- `(+/*) .全员禁言 [开启/关闭]` - 开启/关闭全员禁言（需要权限）
- `(+/*) .禁言 [时长(秒)] [@某人]` - 禁言群成员，默认1800秒（需要权限）
- `(+/*) .取消 禁言 [@某人]` - 解除群成员禁言（需要权限）
- `(+/*) .踢出 [@某人]` / `.踢人 [@某人]` - 踢出群成员（需要权限）

#### 其他功能命令
- `(+/*) .取消 头衔 [@某人/自己]` - 取消群头衔（需要权限）
- `(-) .点赞 [次数] [@某人/自己]` - 点赞，默认20次（点赞他人需要权限，没有指定对象时默认自己）
- `.help 群管` - 查看群管功能帮助文档

#### 命令标识说明
- **(+)** 用户需要管理员/群主/骰主权限
- **(*)** 机器人需要管理员/群主权限
- **(-)** 部分功能需要用户具有权限，部分不需要

---

## 功能详解

### 1. 设置群名片
**命令格式**：`.设置 名片 [内容] [@某人/自己]`

**权限要求**：
- 设置自己的群名片：无需权限
- 设置他人的群名片：需要管理员/群主/骰主权限
- Bot需要管理员/群主权限

**功能说明**：
- 支持使用 `@` 指定目标用户
- 未指定目标或输入 `自己` 时默认设置自己的名片
- 可以设置为任意文本内容

### 2. 设置群名称
**命令格式**：`.设置 群名 [群名]`

**权限要求**：
- 用户需要管理员/群主/骰主权限
- Bot需要管理员/群主权限

**功能说明**：
- 直接修改群名称
- 群名可以是任意合法文本

### 3. 管理员权限管理
**命令格式**：`.设置 管理员 [添加/移除] [@某人]`

**权限要求**：
- 用户需要管理员/群主/骰主权限
- Bot需要群主权限

**功能说明**：
- 支持添加和移除管理员权限
- 必须使用 `@` 指定目标用户
- 参数必须为 `添加` 或 `移除`

### 4. 设置群头衔
**命令格式**：`.设置 头衔 [内容] [@某人/自己]`

**权限要求**：
- 用户需要管理员/群主/骰主权限
- Bot需要群主权限

**功能说明**：
- 支持使用 `@` 指定目标用户
- 未指定目标或输入 `自己` 时默认设置自己的头衔
- 可以设置为任意文本内容

### 5. 取消群头衔
**命令格式**：`.取消 头衔 [@某人/自己]`

**权限要求**：
- 用户需要管理员/群主/骰主权限
- Bot需要群主权限

**功能说明**：
- 支持使用 `@` 指定目标用户
- 未指定目标或输入 `自己` 时默认取消自己的头衔

### 6. 发布群公告
**命令格式**：`.设置 公告 [内容]`

**权限要求**：
- 用户需要管理员/群主/骰主权限
- Bot需要管理员/群主权限

**功能说明**：
- 将指定内容发布为群公告
- 公告内容可以是任意文本

### 7. 全员禁言
**命令格式**：`.全员禁言 [开启/关闭]`

**权限要求**：
- 用户需要管理员/群主/骰主权限
- Bot需要管理员/群主权限

**功能说明**：
- 参数必须为 `开启` 或 `关闭`
- 开启后普通群成员将无法发言

### 8. 禁言成员
**命令格式**：`.禁言 [时长(秒)] [@某人]`

**权限要求**：
- 用户需要管理员/群主/骰主权限
- Bot需要管理员/群主权限

**功能说明**：
- 时长参数可选，默认1800秒（30分钟）
- 必须使用 `@` 指定目标用户
- 时长单位为秒

### 9. 解除禁言
**命令格式**：`.取消 禁言 [@某人]`

**权限要求**：
- 用户需要管理员/群主/骰主权限
- Bot需要管理员/群主权限

**功能说明**：
- 必须使用 `@` 指定目标用户
- 立即解除该成员的禁言状态

### 10. 踢出成员
**命令格式**：`.踢出 [@某人]` / `.踢人 [@某人]`

**权限要求**：
- 用户需要管理员/群主/骰主权限
- Bot需要管理员/群主权限

**功能说明**：
- 必须使用 `@` 指定目标用户
- 将目标成员踢出群聊

### 11. 点赞功能
**命令格式**：`.点赞 [次数] [@某人/自己]`

**权限要求**：
- 点赞自己：无需权限
- 点赞他人：需要管理员/群主/骰主权限

**功能说明**：
- 次数参数可选，默认20次
- 未指定目标或输入 `自己` 时默认点赞自己
- 使用 `@` 可指定点赞他人
- ⚠️ **注意**：需要先添加 Bot 为好友，否则点赞可能失效

---

## 使用示例

### 基础使用示例

```
# 设置自己的群名片
.设置 名片 萌新守护者

# 设置他人的群名片（需要权限）
.设置 名片 资深玩家 @张三

# 设置群名（需要权限）
.设置 群名 快乐游戏群

# 添加管理员（需要权限）
.设置 管理员 添加 @李四

# 设置群头衔（需要权限）
.设置 头衔 活跃之星 @王五

# 发布群公告（需要权限）
.设置 公告 本周六晚上8点进行团本活动，大家准时参加！

# 开启全员禁言（需要权限）
.全员禁言 开启

# 禁言某人30分钟（需要权限）
.禁言 1800 @捣蛋鬼

# 禁言某人10分钟（需要权限）
.禁言 600 @捣蛋鬼

# 解除禁言（需要权限）
.取消 禁言 @捣蛋鬼

# 踢出成员（需要权限）
.踢出 @广告党

# 点赞自己10次
.点赞 10

# 点赞他人20次（需要权限）
.点赞 20 @好朋友

# 查看帮助
.help 群管
```

---

## 安装与配置

1. 从论坛下载完毕后，进行解压。
2. 将解压后文件夹里的 `OlivaDiceManager.opk` 插件放入 OlivOS 的插件目录：`YourOlivOSPath/plugin/app`。
3. 重载插件。
4. （可选）在 OlivaDiceNativeGUI 中配置自定义回复。

---

## 常见问题

**Q: 为什么命令执行失败提示权限不足？**
A: 请检查以下几点：
   1. 用户是否拥有群管理员/群主权限或已被设置为骰主
   2. Bot 是否拥有群管理员/群主权限
   3. 某些操作（如设置头衔、添加管理员）需要 Bot 为群主

**Q: 为什么设置头衔功能不可用？**
A: 设置头衔功能需要 Bot 拥有群主权限。

**Q: 点赞功能为什么没有生效？**
A: 点赞功能需要目标用户先添加 Bot 为好友才能生效。请确保对方已添加 Bot 好友。

**Q: 可以同时 @ 多个人吗？**
A: 目前所有命令都只支持操作单个目标用户（@ 第一个用户）。

**Q: 如何查看所有可用命令？**
A: 使用 `.help 群管` 命令即可查看完整的命令列表和说明。

**Q: 能否在私聊中使用这些命令？**
A: 大部分命令都只能在群聊中使用。私聊中使用会提示功能限制。

**Q: 如何自定义回复文本？**
A: 安装 OlivaDiceNativeGUI 后，在设置面板的自定义回复中找到对应的回复项进行修改即可。记得在配置恢复模块中添加 `OlivaDiceManager`。

---

## 联系与反馈

如有问题或建议，请联系作者：Desom-fu
